var u=function(a,b){if(!(this instanceof u))return new u(a,b);if(a instanceof u)return a;typeof a=='string'&&(a=this.select(a,b)),a&&a.nodeName&&(a=[a]),this.nodes=this.slice(a)},Twix,dropCookie,cookieDuration,cookieName,cookieValue,$mentionedList,lastSymbol,deBounce,fetchUsersTimeout,mentions,startMention;u.prototype={get length(){return this.nodes.length}},u.prototype.nodes=[],u.prototype.addClass=function(){return this.eacharg(arguments,function(a,b){a.classList.add(b)})},u.prototype.adjacent=function(b,a,c){return typeof a=='number'&&(a===0?a=[]:a=new Array(a).join().split(',').map(Number.call,Number)),this.each(function(e,f){var d=document.createDocumentFragment();u(a||{}).map(function(c,d){var a=typeof b=='function'?b.call(this,c,d,e,f):b;return typeof a=='string'?this.generate(a):u(a)}).each(function(a){this.isInPage(a)?d.appendChild(u(a).clone().first()):d.appendChild(a)}),c.call(this,e,d)})},u.prototype.after=function(a,b){return this.adjacent(a,b,function(a,b){a.parentNode.insertBefore(b,a.nextSibling)})},u.prototype.append=function(a,b){return this.adjacent(a,b,function(a,b){a.appendChild(b)})},u.prototype.args=function(a,b,c){return typeof a=='function'&&(a=a(b,c)),typeof a!='string'&&(a=this.slice(a).map(this.str(b,c))),a.toString().split(/[\s,]+/).filter(function(a){return a.length})},u.prototype.array=function(a){a=a;var b=this;return this.nodes.reduce(function(e,d,f){var c;return a?(c=a.call(b,d,f),c||(c=!1),typeof c=='string'&&(c=u(c)),c instanceof u&&(c=c.nodes)):c=d.innerHTML,e.concat(c!==!1?c:[])},[])},u.prototype.attr=function(b,c,a){return a=a?'data-':'',this.pairs(b,c,function(b,c){return b.getAttribute(a+c)},function(b,c,d){b.setAttribute(a+c,d)})},u.prototype.before=function(a,b){return this.adjacent(a,b,function(a,b){a.parentNode.insertBefore(b,a)})},u.prototype.children=function(a){return this.map(function(a){return this.slice(a.children)}).filter(a)},u.prototype.clone=function(){return this.map(function(a,d){var b=a.cloneNode(!0),c=this.getAll(b);return this.getAll(a).each(function(b,d){for(var a in this.mirror)this.mirror[a]&&this.mirror[a](b,c.nodes[d])}),b})},u.prototype.getAll=function(a){return u([a].concat(u('*',a).nodes))},u.prototype.mirror={},u.prototype.mirror.events=function(a,c){if(!a._e)return;for(var b in a._e)a._e[b].forEach(function(a){u(c).on(b,a.callback)})},u.prototype.mirror.select=function(a,b){u(a).is('select')&&(b.value=a.value)},u.prototype.mirror.textarea=function(a,b){u(a).is('textarea')&&(b.value=a.value)},u.prototype.closest=function(a){return this.map(function(b){do if(u(b).is(a))return b;while((b=b.parentNode)&&b!==document)})},u.prototype.data=function(a,b){return this.attr(a,b,!0)},u.prototype.each=function(a){return this.nodes.forEach(a.bind(this)),this},u.prototype.eacharg=function(a,b){return this.each(function(c,d){this.args(a,c,d).forEach(function(a){b.call(this,c,a)},this)})},u.prototype.empty=function(){return this.each(function(a){while(a.firstChild)a.removeChild(a.firstChild)})},u.prototype.filter=function(a){var b=function(b){return b.matches=b.matches||b.msMatchesSelector||b.webkitMatchesSelector,b.matches(a||'*')};return typeof a=='function'&&(b=a),a instanceof u&&(b=function(b){return a.nodes.indexOf(b)!==-1}),u(this.nodes.filter(b))},u.prototype.find=function(a){return this.map(function(b){return u(a||'*',b)})},u.prototype.first=function(){return this.nodes[0]||!1},u.prototype.generate=function(a){return/^\s*<tr[> ]/.test(a)?u(document.createElement('table')).html(a).children().children().nodes:/^\s*<t(h|d)[> ]/.test(a)?u(document.createElement('table')).html(a).children().children().children().nodes:/^\s*</.test(a)?u(document.createElement('div')).html(a).children().nodes:document.createTextNode(a)},u.prototype.handle=function(){var a=this.slice(arguments).map(function(a){return typeof a=='function'?function(b){b.preventDefault(),a.apply(this,arguments)}:a},this);return this.on.apply(this,a)},u.prototype.hasClass=function(){return this.is('.'+this.args(arguments).join('.'))},u.prototype.html=function(a){return a===void 0?this.first().innerHTML||'':this.each(function(b){b.innerHTML=a})},u.prototype.is=function(a){return this.filter(a).length>0},u.prototype.isInPage=function(a){return!(a===document.body)&&document.body.contains(a)},u.prototype.last=function(){return this.nodes[this.length-1]||!1},u.prototype.map=function(a){return a?u(this.array(a)).unique():this},u.prototype.not=function(a){return this.filter(function(b){return!u(b).is(a||!0)})},u.prototype.off=function(e,a,d){var f=a==null&&d==null,b=null,c=a;return typeof a=='string'&&(b=a,c=d),this.eacharg(e,function(a,d){u(a._e?a._e[d]:[]).each(function(e){(f||e.orig_callback===c&&e.selector===b)&&a.removeEventListener(d,e.callback)})})},u.prototype.on=function(f,a,b){var c=null,d=a,e;return typeof a=='string'&&(c=a,d=b,a=function(a){var e=arguments,d=!1;u(a.currentTarget).find(c).each(function(c){if(c===a.target||c.contains(a.target)){d=!0;try{Object.defineProperty(a,'currentTarget',{get:function(){return c}})}catch(a){}b.apply(c,e)}}),!d&&a.currentTarget===a.target&&b.apply(a.target,e)}),e=function(b){return a.apply(this,[b].concat(b.detail||[]))},this.eacharg(f,function(a,b){a.addEventListener(b,e),a._e=a._e||{},a._e[b]=a._e[b]||[],a._e[b].push({callback:e,orig_callback:d,selector:c})})},u.prototype.pairs=function(a,b,c,d){if(typeof b!='undefined'){var e=a;a={},a[e]=b}return typeof a=='object'?this.each(function(c){for(var b in a)d(c,b,a[b])}):this.length?c(this.first(),a):''},u.prototype.param=function(a){return Object.keys(a).map(function(b){return this.uri(b)+'='+this.uri(a[b])}.bind(this)).join('&')},u.prototype.parent=function(a){return this.map(function(a){return a.parentNode}).filter(a)},u.prototype.prepend=function(a,b){return this.adjacent(a,b,function(a,b){a.insertBefore(b,a.firstChild)})},u.prototype.remove=function(){return this.each(function(a){a.parentNode&&a.parentNode.removeChild(a)})},u.prototype.removeClass=function(){return this.eacharg(arguments,function(a,b){a.classList.remove(b)})},u.prototype.replace=function(b,c){var a=[];return this.adjacent(b,c,function(b,c){a=a.concat(this.slice(c.children)),b.parentNode.replaceChild(c,b)}),u(a)},u.prototype.scroll=function(){return this.first().scrollIntoView({behavior:'smooth'}),this},u.prototype.select=function(a,b){return(a=a.replace(/^\s*/,'').replace(/\s*$/,''),/^</.test(a))?u().generate(a):(b||document).querySelectorAll(a)},u.prototype.serialize=function(){var a=this;return this.slice(this.first().elements).reduce(function(c,b){return!b.name||b.disabled||b.type==='file'?c:/(checkbox|radio)/.test(b.type)&&!b.checked?c:b.type==='select-multiple'?(u(b.options).each(function(d){d.selected&&(c+='&'+a.uri(b.name)+'='+a.uri(d.value))}),c):c+'&'+a.uri(b.name)+'='+a.uri(b.value)},'').slice(1)},u.prototype.siblings=function(a){return this.parent().children(a).not(this)},u.prototype.size=function(){return this.first().getBoundingClientRect()},u.prototype.slice=function(a){return!a||a.length===0||typeof a=='string'||a.toString()==='[object Function]'?[]:a.length?[].slice.call(a.nodes||a):[a]},u.prototype.str=function(a,b){return function(c){return typeof c=='function'?c.call(this,a,b):c.toString()}},u.prototype.text=function(a){return a===void 0?this.first().textContent||'':this.each(function(b){b.textContent=a})},u.prototype.toggleClass=function(b,a){return!!a===a?this[a?'addClass':'removeClass'](b):this.eacharg(b,function(a,b){a.classList.toggle(b)})},u.prototype.trigger=function(b){var a=this.slice(arguments).slice(1);return this.eacharg(b,function(e,c){var d={bubbles:!0,cancelable:!0,detail:a},b;try{b=new window.CustomEvent(c,d)}catch(d){b=document.createEvent('CustomEvent'),b.initCustomEvent(c,!0,!0,a)}e.dispatchEvent(b)})},u.prototype.unique=function(){return u(this.nodes.reduce(function(b,a){var c=a!==null&&a!==void 0&&a!==!1;return c&&b.indexOf(a)===-1?b.concat(a):b},[]))},u.prototype.uri=function(a){return encodeURIComponent(a).replace(/!/g,'%21').replace(/'/g,'%27').replace(/\(/g,'%28').replace(/\)/g,'%29').replace(/\*/g,'%2A').replace(/%20/g,'+')},u.prototype.wrap=function(a){function b(a){while(a.firstElementChild)a=a.firstElementChild;return u(a)}return this.map(function(c){return u(a).each(function(a){b(a).append(c.cloneNode(!0)),c.parentNode.replaceChild(a,c)})})},typeof module=='object'&&module.exports&&(module.exports=u,module.exports.u=u),function(){if(typeof window.Element=="undefined"||"classList"in document.documentElement)return;var a=Array.prototype,c=a.push,d=a.splice,e=a.join;function b(d){var b,a;this.el=d,b=d.className.replace(/^\s+|\s+$/g,'').split(/\s+/);for(a=0;a<b.length;a++)c.call(this,b[a])}b.prototype={add:function(a){if(this.contains(a))return;c.call(this,a),this.el.className=this.toString()},contains:function(a){return this.el.className.indexOf(a)!=-1},item:function(a){return this[a]||null},remove:function(b){if(!this.contains(b))return;for(var a=0;a<this.length;a++)if(this[a]==b)break;d.call(this,a,1),this.el.className=this.toString()},toString:function(){return e.call(this,' ')},toggle:function(a){return this.contains(a)?this.remove(a):this.add(a),this.contains(a)}},window.DOMTokenList=b;function f(a,b,c){Object.defineProperty?Object.defineProperty(a,b,{get:c}):a.__defineGetter__(b,c)}f(Element.prototype,'classList',function(){return new b(this)})}(),Twix=function(){function a(){}a.ajax=function(a){var b,c;a=a||{url:""},a.type=a.type.toUpperCase()||'GET',a.headers=a.headers||{},a.timeout=parseInt(a.timeout)||0,a.success=a.success||function(){},a.error=a.error||function(){},a.async=typeof a.async=='undefined'||a.async,b=new XMLHttpRequest,a.timeout>0&&(b.timeout=a.timeout,b.ontimeout=function(){a.error('timeout','timeout',b)}),b.open(a.type,a.url,a.async);for(c in a.headers)a.headers.hasOwnProperty(c)&&b.setRequestHeader(c,a.headers[c]);return b.send(a.data),b.onreadystatechange=function(){var b,c;this.readyState==4&&(this.status>=200&&this.status<300||this.status==304)?(b=this.responseText,c=this.getResponseHeader('Content-Type'),c&&c.match(/json/)&&(b=JSON.parse(this.responseText)),a.success(b,this.statusText,this)):this.readyState==4&&a.error(this.status,this.statusText,this)},a.async==!1&&(b.readyState==4&&(b.status>=200&&b.status<300||b.status==304)?a.success(b.responseText,b):b.readyState==4&&a.error(b.status,b.statusText,b)),b};var b=function(d,e,b,c){return typeof b=="function"&&(c=b,b=void 0),a.ajax({url:e,data:b,type:d,success:c})};return a.get=function(a,c,d){return b("GET",a,c,d)},a.head=function(a,c,d){return b("HEAD",a,c,d)},a.post=function(a,c,d){return b("POST",a,c,d)},a.patch=function(a,c,d){return b("PATCH",a,c,d)},a.put=function(a,c,d){return b("PUT",a,c,d)},a.delete=function(a,c,d){return b("DELETE",a,c,d)},a.options=function(a,c,d){return b("OPTIONS",a,c,d)},a}(),__=Twix,dropCookie=!0,cookieDuration=14,cookieName="complianceCookie",cookieValue="on",$mentionedList=u("#mentioned-list").first(),lastSymbol="";function createDiv(){u("body").prepend('<div id="cookie-law" class="container-fluid"><p>This website uses cookies. By continuing we assume your permission to deploy cookies, as detailed in our <a href="/privacy" rel="nofollow" title="Privacy Policy">privacy policy</a>. <a role="button" href="javascript:void(0);" onclick="removeMe();">Close</a></p></div>'),createCookie(window.cookieName,window.cookieValue,window.cookieDuration)}Array.prototype.findIndex||(Array.prototype.findIndex=function(d){var b,e,f,c,a;if(this==null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof d!="function")throw new TypeError("predicate must be a function");b=Object(this),e=b.length>>>0,f=arguments[1];for(a=0;a<e;a++)if(c=b[a],d.call(f,c,a,b))return a;return-1}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(d){var b,e,f,a,c;if(this==null)throw new TypeError('"this" is null or not defined');if(b=Object(this),e=b.length>>>0,typeof d!="function")throw new TypeError("predicate must be a function");for(f=arguments[1],a=0;a<e;){if(c=b[a],d.call(f,c,a,b))return c;a++}},configurable:!0,writable:!0});function createCookie(d,e,c){var a,b;c?(a=new Date,a.setTime(a.getTime()+c*24*60*60*1e3),b="; expires="+a.toGMTString()):(b=""),window.dropCookie&&(document.cookie=d+"="+e+b+"; path=/")}function checkCookie(e){for(var d=e+"=",c=document.cookie.split(";"),b=0,a;b<c.length;b++){for(a=c[b];a.charAt(0)==" ";)a=a.substring(1,a.length);if(a.indexOf(d)==0)return a.substring(d.length,a.length)}return null}function eraseCookie(a){createCookie(a,"",-1)}window.onload=function(){checkCookie(window.cookieName)!=window.cookieValue&&createDiv()};function removeMe(){var a=document.getElementById("cookie-law");a.parentNode.removeChild(a)}function replyTo(e){var c,a,b,d;e.preventDefault(),c=u("textarea#text"),a=document.getElementById("text"),b=u(e.target).data("reply"),u("#replyTo").first().value!=""&&(b=b.replace("("+u("#replyTo").first().value+") ","")),c.empty(),a.value=b,c.scroll(),a.focus(),d=a.value.length,a.setSelectionRange(d,d)}function editTwt(b){var c,a,d;b.preventDefault(),c=u("textarea#text"),a=document.getElementById("text"),c.empty(),a.value=u(b.target).data("text"),c.scroll(),a.focus(),d=a.value.length,a.setSelectionRange(d,d),u("#replaceTwt").first().value=u(b.target).data("hash")}function deleteTwt(a){a.preventDefault(),confirm("Are you sure you want to delete this twt? This cannot be undone!")&&Twix.ajax({type:"DELETE",url:u("#form").attr("action"),success:function(c){var b=u(a.target).data("hash");u("#"+b).remove()}})}u("#theme input").on("change",function(b){var a=u(b.target).first().value;switch(a){case"auto":u("html").data("theme","");break;case"light":case"dark":u("html").data("theme",a);break;default:console.log("invalid theme: "+a)}}),u(".reply").on("click",replyTo),u(".edit").on("click",editTwt),u(".delete").on("click",deleteTwt),u("#post").on("click",function(a){a.preventDefault(),u("#post").html('<i class="icss-spinner icss-pulse"></i>&nbsp;Posting...'),u("#post").attr("disabled",!0),u("#form").first().submit()}),u.prototype.getSelection=function(){var a=this.first();return("selectionStart"in a&&function(){var b=a.selectionEnd-a.selectionStart;return{start:a.selectionStart,end:a.selectionEnd,length:b,text:a.value.substr(a.selectionStart,b)}}||document.selection&&function(){var b,c,d;return(a.focus(),b=document.selection.createRange(),b===null)?{start:0,end:a.value.length,length:0}:(c=a.createTextRange(),d=c.duplicate(),c.moveToBookmark(b.getBookmark()),d.setEndPoint("EndToStart",c),{start:d.text.length,end:d.text.length+b.text.length,length:b.text.length,text:b.text})}||function(){return null})()},u.prototype.replaceSelection=function(){var a=this.first(),b=arguments[0]||"";return("selectionStart"in a&&function(){return a.value=a.value.substr(0,a.selectionStart)+b+a.value.substr(a.selectionEnd,a.value.length),this}||document.selection&&function(){return a.focus(),document.selection.createRange().text=b,this}||function(){return a.value+=b,jQuery(a)})()};function createMentionedUserNode(a){return u("<div>").addClass("user-list__user").append(u("<div>").addClass("avatar").attr("style","background-image: url('/user/"+a+"/avatar.png')")).append(u("<div>").addClass("info").append(u("<div>").addClass("nickname").text(a)))}function formatText(a,b){var c,f,d,e;a.first().focus(),c="",f=a.first().selectionStart,d=a.getSelection().text,d.length==0?c=b+b:c=b+d+b,a.replaceSelection(c,!0),a.first().focus(),d.length||(e=f+b.length,a.first().setSelectionRange(e,e))}function insertText(a,b){var c=a.first().selectionStart,d;a.first().value.slice(startMention,c),a.replaceSelection(b,!1),a.first().focus(),d=a.first().value.substr(c+b.length-1,1)===")"?c+b.length-1:c+b.length,a.first().setSelectionRange(d,d)}function iOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].indexOf(navigator.platform)!==-1||navigator.userAgent.indexOf("Mac")!==-1&&"ontouchend"in document}function IE(){return!!window.MSInputMethodContext&&!!document.documentMode}deBounce=300,fetchUsersTimeout=null;function getUsers(a){clearTimeout(fetchUsersTimeout),fetchUsersTimeout=setTimeout(function(){let b="/lookup";a&&(b+="?prefix="+a),Twix.ajax({type:"GET",url:b,success:function(a){u("#mentioned-list-content").empty(),a.map(function(a){u("#mentioned-list-content").append(createMentionedUserNode(a))}),a.length&&u(".user-list__user").first().classList.add("selected")}})},deBounce)}mentions=[],u("#bBtn").on("click",function(a){a.preventDefault(),formatText(u("textarea#text"),"**")}),u("#iBtn").on("click",function(a){a.preventDefault(),formatText(u("textarea#text"),"*")}),u("#sBtn").on("click",function(a){a.preventDefault(),formatText(u("textarea#text"),"~~")}),u("#cBtn").on("click",function(a){a.preventDefault(),formatText(u("textarea#text"),"`")}),u("#lnkBtn").on("click",function(a){a.preventDefault(),insertText(u("textarea#text"),"[title](https://)")}),u("#imgBtn").on("click",function(a){a.preventDefault(),insertText(u("textarea#text"),"![](https://)")}),u("#usrBtn").on("click",function(a){a.preventDefault(),$mentionedList.classList.contains("show")?clearMentionedList():(u("textarea#text").first().focus(),startMention=u("textarea#text").first().selectionStart+1,insertText(u("textarea#text"),"@"),(iOS()||IE())&&(showMentionedList(),getUsers()))}),u("#writeBtn").on("click",function(a){a.preventDefault(),u("#title").attr("type",""),u("#title").first().focus(),u("#post").html('<i class="icss-print"></i>&nbsp;Publish!'),u("#text").attr("maxlength",""),u("#text").attr("rows",24),u("#form").attr("action","/blog")}),u("textarea#text").on("keydown",function(a){console.log(a.ctrlKey),console.log(a.keyCode),console.log(a.key),a.ctrlKey&&a.keyCode==13&&(a.preventDefault(),u("#post").trigger("click"))}),u("textarea#text").on("focus",function(a){a.relatedTarget===u("#usrBtn").first()&&(showMentionedList(),getUsers())}),startMention=null,u("textarea#text").on("keyup",function(a){var b,c,d;(a.key.length===1||a.key==="Backspace")&&(b=a.target.selectionStart,c=a.target.value.slice(b-1,b),c==="@"&&(startMention=b,showMentionedList()),$mentionedList.classList.contains("show")&&(d=a.target.value.slice(startMention,b),console.log("searchStr",d),c.trim()?getUsers(d):(clearMentionedList(),startMention=null)))}),u("#mentioned-list-content").on("mousemove",function(b){var a=b.target;u(".user-list__user").nodes.forEach(function(a){a.classList.remove("selected")}),a.classList.contains("user-list__user")&&a.classList.add("selected")}),u("#mentioned-list").on("click",function(b){var a=u("textarea#text").first().value;u("textarea#text").first().value=a.slice(0,startMention)+a.slice(u("textarea#text").first().selectionEnd),u("textarea#text").first().setSelectionRange(startMention,startMention),insertText(u("textarea#text"),b.target.innerText.trim()),u("#mentioned-list").first().classList.remove("show")}),u("#uploadImage").on("change",function(a){u("#uploadImageButton").removeClass("icss-camera"),u("#uploadImageButton").addClass("icss-spinner icss-pulse"),u("#uploadImageForm").data("tooltip","Uploading..."),u("#uploadImage").html('<i class="icss-spinner icss-pulse"></i>'),Twix.ajax({type:"POST",url:u("#imageUploadForm").attr("action"),data:new FormData(u("#imageUploadForm").first()),success:function(d){var c=u("textarea#text"),a=document.getElementById("text"),b;a.value+=" ![]("+d.Path+") ",c.scroll(),a.focus(),b=c.text().length,a.setSelectionRange(b,b),u("#uploadImageButton").removeClass("icss-spinner icss-pulse"),u("#uploadImageButton").addClass("icss-camera"),u("#uploadImage").data("tooltip","Upload")},error:function(a,b){u("#uploadImageButton").removeClass("icss-spinner icss-pulse"),u("#uploadImageButton").addClass("icss-camera"),alert("An error occurred uploading your image: "+a+" "+b)}})}),u("#uploadVideo").on("change",function(a){u("#uploadVideoButton").removeClass("icss-camera"),u("#uploadVideoButton").addClass("icss-spinner icss-pulse"),u("#uploadVideoForm").data("tooltip","Uploading..."),u("#uploadVideo").html('<i class="icss-spinner icss-pulse"></i>'),Twix.ajax({type:"POST",url:u("#videoUploadForm").attr("action"),data:new FormData(u("#videoUploadForm").first()),success:function(d){var c=u("textarea#text"),a=document.getElementById("text"),b;a.value+=" ![]("+d.Path+") ",c.scroll(),a.focus(),b=c.text().length,a.setSelectionRange(b,b),u("#uploadVideoButton").removeClass("icss-spinner icss-pulse"),u("#uploadVideoButton").addClass("icss-camera"),u("#uploadVideo").data("tooltip","Upload")},error:function(a,b){u("#uploadVideoButton").removeClass("icss-spinner icss-pulse"),u("#uploadVideoButton").addClass("icss-camera"),alert("An error occurred uploading your video: "+a+" "+b)}})}),u("#burgerMenu").on("click",function(a){a.preventDefault(),u("#mainNav").hasClass("responsive")?u("#mainNav").removeClass("responsive"):u("#mainNav").addClass("responsive")}),u("body").on("keydown",function(a){var b,c,d,f,g,e,h,i;u("#mentioned-list").first()&&u("#mentioned-list").first().classList.contains("show")&&(a.key==="Escape"&&clearMentionedList(),a.key==="ArrowUp"||a.key==="ArrowDown"||a.key==="Up"||a.key==="Down"&&(a.preventDefault(),b=u(".user-list__user").nodes.findIndex(function(a){return a.classList.contains("selected")}),a.key==="ArrowDown"||a.key==="Down"?c=b+1===u(".user-list__user").length?0:b+1:(a.key==="ArrowUp"||a.key==="Up")&&(c=b-1<0?u(".user-list__user").length-1:b-1),d=u(".user-list__user").first().clientHeight*(c-2),u(".user-list__user").nodes.forEach(function(a,b){a.classList.remove("selected"),b===c&&(u("#mentioned-list-content").first().scrollTop=d>0?d:0,a.classList.add("selected"))})),(a.key==="Tab"||a.key==="Enter")&&(a.preventDefault(),f=u(".user-list__user").nodes.findIndex(function(a){return a.classList.contains("selected")}),g=u(".user-list__user").nodes[f],e=u("textarea#text").first().value,u("textarea#text").first().value=e.slice(0,startMention)+e.slice(u("textarea#text").first().selectionEnd),u("textarea#text").first().setSelectionRange(startMention,startMention),insertText(u("textarea#text"),g.innerText.trim()),clearMentionedList()),h=u("textarea#text").first().selectionStart,i=u("textarea#text").first().value.slice(h-1,1),a.key==="Backspace"&&i==="@"&&(console.log("remove @"),clearMentionedList()))});function clearMentionedList(){$mentionedList.classList.remove("show"),u("#mentioned-list-content").first().innerHTML=""}function showMentionedList(){$mentionedList.classList.add("show"),u("#mentioned-list").first().style.top=u("textarea#text").first().clientHeight+2+"px"}window.performance.getEntriesByType("navigation")[0].type==="back_forward"&&window.scrollTo(0,Number(localStorage.getItem("prevOffset"))),window.onbeforeunload=function(){localStorage.setItem("prevOffset",localStorage.getItem("currentOffset")||String(window.scrollY)),localStorage.setItem("currentOffset",String(window.scrollY))}