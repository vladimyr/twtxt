{{define "content"}}
{{ if .Authenticated }}
  <div class="grid">
    <div>
      <form action="/post" method="POST">
        <div class="grid">
          <textarea id="text" name="text" placeholder="What's on your mind?" rows=1 maxlength=140 autofocus required></textarea>
        </div>
        <button type="submit">Post</button>
      </form>
    </div>
  </div>
{{ end }}
<div class="grid">
  <div>
    {{ range .Tweets }}
      <p>
        &gt;&nbsp;<a href="{{ .Tweeter.URL }}">{{ .Tweeter.Nick }}</a>&nbsp;({{ .Created | Time }})
        {{ if $.Authenticated }}
          &nbsp;
          {{ if $.User.Follows .Tweeter.URL }}
            [<a href="/unfollow?nick={{ .Tweeter.Nick  }}">Unfollow</a>]
          {{ else }}
            [<a href="/follow?nick={{ .Tweeter.Nick  }}&url={{ .Tweeter.URL }}">Follow</a>]
          {{ end }}
        {{ end }}
        <br />
        {{ .Text | FormatTweet }}
      </p>
    {{ end }}

    {{ if .Pager.HasPages }}
      <nav>
        <ul>
          <li>
            {{ if .Pager.HasPrev }}
              <a href="/?page={{ .Pager.PrevPage }}">Prev</a>
            {{ else }}
              <a href="#" data-tooltip="No previous page">Prev</a>
            {{ end}}
          </li>
        </ul>
        <ul>
          <li><small>Page {{ $.Pager.Page }}/{{ $.Pager.PageNums }} of {{ $.Pager.Nums }} Tweets</small></li>
        </ul>
        <ul>
          <li>
            {{ if .Pager.HasNext }}
              <a href="/?page={{ .Pager.NextPage }}">Next</a>
            {{ else }}
              <a href="#" data-tooltip="No next page">Next</a>
            {{ end}}
          </li>
        </ul>
      </nav>
    {{ end }}
  </div>
</div>
{{end}}
